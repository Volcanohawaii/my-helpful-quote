<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Destiny Lab</title>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://t1.daumcdn.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; img-src 'self' data: https://api.countapi.xyz; frame-src https://t1.daumcdn.net https://display.adfit.kakao.com; connect-src https://api.countapi.xyz;">

    <link href="https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&family=Pretendard:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; -webkit-font-smoothing: antialiased; }
        :root { --bg: #F0EDE9; --paper: #FFFFFF; --primary: #243447; --accent: #9A8467; --text: #444444; --border: #D1CDC5; }
        body { font-family: 'Pretendard', sans-serif; background-color: var(--bg); color: var(--text); margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; overflow-x: hidden; position: relative; }
        
        /* ë³„ë¹› ì‹œì¸ì„± ê·¹ëŒ€í™” */
        body::before { 
            content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; 
            background-image: 
                radial-gradient(circle at center, rgba(255, 255, 255, 1) 1.2px, transparent 2px), 
                radial-gradient(circle at center, rgba(154, 132, 103, 0.8) 1.8px, transparent 3.5px);
            background-size: 60px 60px, 120px 120px; background-position: 0 0, 40px 40px; 
            opacity: 1; animation: twinkle 4s ease-in-out infinite alternate; 
        }
        @keyframes twinkle { 0% { opacity: 0.5; transform: scale(1); } 100% { opacity: 1; transform: scale(1.1); } }

        .container { width: 100%; max-width: 480px; position: relative; z-index: 1; }
        .lang-toggle { position: absolute; top: -50px; right: 0; display: flex; gap: 15px; }
        .flag { font-size: 1.6rem; cursor: pointer; opacity: 0.4; filter: grayscale(100%); transition: 0.3s; }
        .flag.active { opacity: 1; filter: grayscale(0%); transform: scale(1.2); }
        .report-card { background: var(--paper); padding: 55px 35px; box-shadow: 0 30px 60px rgba(0,0,0,0.1); border: 1px solid var(--border); text-align: center; position: relative; animation: fadeIn 0.8s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .official-seal { position: absolute; top: 25px; right: 25px; width: 65px; height: 65px; border: 2px double var(--accent); color: var(--accent); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-family: 'Gowun Batang', serif; font-size: 0.7rem; font-weight: 700; opacity: 0.5; transform: rotate(12deg); pointer-events: none; }
        h1 { font-family: 'Gowun Batang', serif; font-size: 1.4rem; color: var(--primary); margin: 0 0 10px 0; word-break: keep-all; }
        .summary-line { font-family: 'Gowun Batang', serif; font-size: 0.95rem; color: var(--accent); margin-bottom: 30px; font-weight: 600; line-height: 1.4; }
        .tab-content { text-align: left; line-height: 1.8; font-size: 0.95rem; }
        .section-wrap { margin-bottom: 30px; }
        .section-title { font-family: 'Gowun Batang', serif; font-size: 1rem; color: var(--accent); display: block; margin-bottom: 12px; font-weight: 700; border-bottom: 1px solid #F0F0F0; padding-bottom: 6px; }
        .info-box { background: #F9F8F6; padding: 18px; border-radius: 8px; border-left: 4px solid var(--accent); margin-bottom: 15px; }
        .warning-box { background: #FFF5F5; padding: 15px; border-radius: 8px; font-size: 0.85rem; color: #C0392B; border: 1px dashed #FADBD8; margin-top: 25px; }
        .tabs { display: flex; border-bottom: 1px solid #EEE; margin: 25px 0; }
        .tab-btn { flex: 1; padding: 12px 0; border: none; background: none; cursor: pointer; font-size: 0.85rem; color: #BBB; font-family: 'Gowun Batang'; }
        .tab-btn.active { color: var(--primary); font-weight: 700; border-bottom: 2px solid var(--primary); }
        .btn-action { width: 100%; background: var(--primary); color: white; border: none; padding: 18px; border-radius: 4px; cursor: pointer; font-weight: 600; font-size: 1rem; }
        .hidden { display: none; }
        input { width: 100%; padding: 15px; margin-bottom: 15px; border: none; border-bottom: 1px solid #DDD; font-size: 1.1rem; outline: none; background: transparent; }
        .visitor-counter { margin-top: 25px; font-size: 0.75rem; color: #AAA; font-family: 'Gowun Batang'; border-top: 1px solid #F5F5F5; padding-top: 15px; }
        .visitor-count-num { color: var(--accent); font-weight: 700; transition: all 1s; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body oncontextmenu="return false" onselectstart="return false" ondragstart="return false">

<div id="loading-overlay" style="position:fixed; inset:0; width:100%; height:100dvh; background:rgba(240, 237, 233, 0.96); z-index:9999; display:none; align-items:center; justify-content:center; padding:20px; backdrop-filter: blur(2px);">
    <div style="background:white; padding:40px 15px; border-radius:15px; box-shadow:0 10px 30px rgba(0,0,0,0.05); border:1px solid #D1CDC5; width:100%; max-width:340px; min-width:320px; display:flex; flex-direction:column; align-items:center; justify-content:center; box-sizing:border-box;">
        <div id="load-seal" class="official-seal" style="position:static; margin-bottom:20px; opacity:1;">ë¶„ì„ì¤‘</div>
        <h2 id="load-title" style="font-family:'Gowun Batang'; color:var(--primary); font-size:1.1rem; margin-bottom:8px; width:100%; text-align:center;">ìš´ëª…ì˜ ì—ë„ˆì§€ë¥¼ ì¡°í•© ì¤‘...</h2>
        <p id="load-desc" style="color:#888; font-size:0.8rem; margin-bottom:25px; width:100%; text-align:center;">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”.</p>
        <div style="width:300px; height:250px; background:#f9f9f9; display:flex; align-items:center; justify-content:center; border-radius:8px; overflow:hidden; flex-shrink:0;">
            <ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-pMoVBneQCSicnBZ7" data-ad-width="300" data-ad-height="250"></ins>
            <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
        </div>
        <div style="margin-top:25px; border:3px solid #f3f3f3; border-top:3px solid var(--accent); border-radius:50%; width:24px; height:24px; animation:spin 1s linear infinite;"></div>
    </div>
</div>

<div class="container">
    <div class="lang-toggle">
        <span class="flag active" id="flag-ko" onclick="setLang('ko')">ğŸ‡°ğŸ‡·</span>
        <span class="flag" id="flag-en" onclick="setLang('en')">ğŸ‡ºğŸ‡¸</span>
    </div>

    <div class="report-card" id="view-home">
        <div class="official-seal" id="seal-home">ìš´ëª…ê³µí•™<br>ë¶„ì„ì‹¤</div>
        <h1 id="ui-title">ì„±ëª…í•™ ë°ì´í„° ë¶„ì„</h1>
        <p id="ui-desc" style="font-size:0.85rem; color:#888; margin-bottom:40px; line-height:1.6;">ì´ë¦„ì˜ íŒŒë™ ì—ë„ˆì§€ì™€ ì‚¬ì£¼ì˜ ê³„ì ˆì  ìš”ì¸ì„ ê²°í•©í•˜ì—¬ ê³ ìœ í•œ ìš´ëª… ê¸°ìš´ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.</p>
        <input type="text" id="userName" placeholder="ì„±í•¨">
        <input type="text" id="userBirth" placeholder="ì–‘ë ¥ ìƒë…„ì›”ì¼ 8ìë¦¬ (1000-2150)" onkeyup="if(event.key==='Enter'){startAnalysis()}">
        <button class="btn-action" id="ui-btn" onclick="startAnalysis()">ë¦¬í¬íŠ¸ ìƒì„±í•˜ê¸°</button>
        <div class="visitor-counter" id="visitor-ui">ë¶„ì„ ì™„ë£Œëœ ìš´ëª…: <span class="visitor-count-num" id="visit-count">...</span>ê±´</div>
    </div>

    <div class="report-card hidden" id="view-result">
        <div class="official-seal" id="seal-res">ì •ì‹ë¶„ì„ë³¸</div>
        <h1 id="dynamic-title">ë‹˜ì„ ìœ„í•œ ë¶„ì„ ë¦¬í¬íŠ¸</h1>
        <div id="radarChart" style="margin:0 auto 15px; width:220px; height:220px;"></div>
        <div class="summary-line" id="dynamic-summary">ë¶„ì„ ì¤‘...</div>
        <div class="tabs">
            <button class="tab-btn active" id="tab1" onclick="switchTab('fortune', this)">í˜„ìƒ ë¶„ì„</button>
            <button class="tab-btn" id="tab2" onclick="switchTab('past', this)">ì „ìƒ ê¸°ë¡</button>
            <button class="tab-btn" id="tab3" onclick="switchTab('next', this)">ë‚´ì„¸ ì˜ˆì•½</button>
        </div>
        <div class="tab-content" id="tab-body"></div>
        <button class="btn-action" style="margin-top:30px; background:white; border:1px solid #DDD; color:#444;" id="ui-copy" onclick="copyLink()">ë§í¬ ë³µì‚¬</button>
        <p onclick="window.location.href=window.location.pathname" style="font-size:0.7rem; color:#CCC; margin-top:20px; cursor:pointer;" id="ui-reset">ì´ˆê¸°í™”</p>
    </div>
</div>

<script>
    /* -------------------------------------------------------------------
       1. ë§ˆìŠ¤í„° ë°ì´í„°ì…‹ (ìƒëµ ì ˆëŒ€ ì—†ìŒ)
    ------------------------------------------------------------------- */
    const hangulElements = {'ã„±':'æœ¨','ã„²':'æœ¨','ã…‹':'æœ¨','ã„´':'ç«','ã„·':'ç«','ã„¸':'ç«','ã„¹':'ç«','ã…Œ':'ç«','ã…‡':'åœŸ','ã…':'åœŸ','ã……':'é‡‘','ã…†':'é‡‘','ã…ˆ':'é‡‘','ã…‰':'é‡‘','ã…Š':'é‡‘','ã…':'æ°´','ã…‚':'æ°´','ã…ƒ':'æ°´','ã…':'æ°´'};
    const alphabetElements = {'A':'æœ¨','E':'æœ¨','I':'æœ¨','O':'æœ¨','U':'æœ¨','Y':'æœ¨','B':'æ°´','P':'æ°´','M':'æ°´','F':'æ°´','W':'æ°´','C':'ç«','G':'ç«','J':'ç«','L':'ç«','S':'ç«','D':'åœŸ','N':'åœŸ','T':'åœŸ','H':'åœŸ','K':'é‡‘','R':'é‡‘','V':'é‡‘','X':'é‡‘','Q':'é‡‘','Z':'é‡‘'};
    const elementColors = { "æœ¨": { fill: "rgba(46, 204, 113, 0.3)", stroke: "#27ae60" }, "ç«": { fill: "rgba(231, 76, 60, 0.3)", stroke: "#c0392b" }, "åœŸ": { fill: "rgba(241, 196, 15, 0.3)", stroke: "#f39c12" }, "é‡‘": { fill: "rgba(149, 165, 166, 0.3)", stroke: "#7f8c8d" }, "æ°´": { fill: "rgba(52, 152, 219, 0.3)", stroke: "#2980b9" } };
    
    const nameNumerology = {
        1: { title: "ê¸°ë³¸ê²©", desc: "ìŠ¤ìŠ¤ë¡œ ê¸¸ì„ ê°œì²™í•˜ëŠ” ê°•í•œ ìƒëª…ë ¥ì…ë‹ˆë‹¤.", titleEn: "Pioneer", descEn: "Independent drive." },
        2: { title: "ì¡°í™”ê²©", desc: "íƒ€ì¸ê³¼ í˜‘ë ¥í•˜ì—¬ ì•ˆì •ì ì¸ ê¸°ë°˜ì„ ë‹¦ìŠµë‹ˆë‹¤.", titleEn: "Harmonizer", descEn: "Balance in cooperation." },
        3: { title: "í¬ë§ê²©", desc: "ë°ê³  ê¸ì •ì ì¸ ì—ë„ˆì§€ë¡œ ê¾¸ì¤€íˆ ì„±ì¥í•©ë‹ˆë‹¤.", titleEn: "Optimist", descEn: "Your positive energy attracts growth." },
        4: { title: "ì•ˆì •ê²©", desc: "ì°¨ë¶„í•˜ê³  ë‚´ì‹¤ì´ ìˆì–´ í‰ì•ˆí•œ ì‚¶ì„ ì‚½ë‹ˆë‹¤.", titleEn: "Anchor", descEn: "Grounded nature that builds a secure life." },
        5: { title: "ì„±ê³µê²©", desc: "ì§€í˜œì™€ ìš´ì´ ë”°ë¼ì£¼ì–´ ëª©í‘œë¥¼ ì„±ì·¨í•©ë‹ˆë‹¤.", titleEn: "Achiever", descEn: "Luck and wisdom guide you toward success." },
        6: { title: "ë•ë§ê²©", desc: "ì„±í’ˆì´ ì˜¨í™”í•˜ì—¬ ì¸ë³µì´ ë§ê³  ëŒ€ì—…ì„ ì´ë£¹ë‹ˆë‹¤.", titleEn: "Virtuous", descEn: "Warm personality attracts strong supporters." },
        7: { title: "ë…ë¦½ê²©", desc: "ì£¼ê´€ì´ ëšœë ·í•˜ê³  ìì‹ ì˜ í˜ìœ¼ë¡œ ì„±ê³µí•©ë‹ˆë‹¤.", titleEn: "Independent", descEn: "Strong self-will builds your legacy." },
        8: { title: "ë°œì „ê²©", desc: "ì„±ì‹¤í•¨ì„ ë°”íƒ•ìœ¼ë¡œ ëª…ì˜ˆë¥¼ ìŒ“ì•„ê°‘ë‹ˆë‹¤.", titleEn: "Rising Star", descEn: "Step-by-step diligence leads to respect." },
        9: { title: "í†µì°°ê²©", desc: "ì‚¬ë¬¼ì˜ ì´ì¹˜ë¥¼ ê¿°ëš«ëŠ” ëˆˆì´ ìˆì–´ ë¹›ì„ ë°œí•©ë‹ˆë‹¤.", titleEn: "Insightful", descEn: "Sharp intuition allows you to see the truth." },
        10: { title: "ìœ ì—°ê²©", desc: "ìœ„ê¸°ë¥¼ ê¸°íšŒë¡œ ë°”ê¾¸ëŠ” ì¬ì¹˜ê°€ ë›°ì–´ë‚©ë‹ˆë‹¤.", titleEn: "Adaptable", descEn: "Natural wit to turn challenges into gold." },
        11: { title: "ì¬ìƒê²©", desc: "ì–´ë ¤ì›€ì´ ë‹¥ì³ë„ ë‹¤ì‹œ ì¼ì–´ë‚˜ëŠ” íšŒë³µë ¥ì´ ê°•í•©ë‹ˆë‹¤.", titleEn: "Resilient", descEn: "Rise stronger after every setback." },
        12: { title: "ì„±ì‹¤ê²©", desc: "í•œê²°ê°™ì€ ë§ˆìŒìœ¼ë¡œ ì •ì§„í•˜ì—¬ ê²°ì‹¤ì„ ë§ºìŠµë‹ˆë‹¤.", titleEn: "Dedicated", descEn: "Consistency is your ultimate power." },
        13: { title: "ì´ëª…ê²©", desc: "ì§€í˜œê°€ ê¹Šì–´ í•™ë¬¸ì´ë‚˜ ì˜ˆìˆ ë¡œ ì„±ê³µí•©ë‹ˆë‹¤.", titleEn: "Brilliant", descEn: "Intellectual sharpness paves your way." },
        14: { title: "ê¸°ì˜ˆê²©", desc: "ì˜ˆìˆ ì  ê°ê°ì´ ë›°ì–´ë‚˜ ë…ì°½ì ì¸ ë¶„ì•¼ì—ì„œ ì„±ê³µí•©ë‹ˆë‹¤.", titleEn: "Artist", descEn: "Unique creativity makes you stand out." },
        15: { title: "í†µì†”ê²©", desc: "ë•ë§ì´ ë†’ê³  ë§ì€ ì´ë“¤ì„ ì´ë„ëŠ” ë¦¬ë”ê°€ ë©ë‹ˆë‹¤.", titleEn: "Leader", descEn: "Natural charisma and virtue position you high." },
        16: { title: "ë•ë§ê²©", desc: "ì¸ë³µì´ í’ë¶€í•˜ì—¬ ì£¼ë³€ì˜ ë„ì›€ìœ¼ë¡œ ë²ˆì°½í•©ë‹ˆë‹¤.", titleEn: "Favored", descEn: "Surrounded by people who want you to succeed." },
        17: { title: "ê°•ê±´ê²©", desc: "ì‹ ë…ì´ ê°•í•˜ê³  ë‚œê´€ì„ ì •ë©´ìœ¼ë¡œ ëŒíŒŒí•©ë‹ˆë‹¤.", titleEn: "Fearless", descEn: "Unshakable faith overcomes any obstacle." },
        18: { title: "ë°œì „ê²©", desc: "ê°•í•œ ì˜ì§€ë¡œ ë‚œê´€ì„ ëš«ê³  ììˆ˜ì„±ê°€í•©ë‹ˆë‹¤.", titleEn: "Self-Made", descEn: "Pure determination helps you achieve wealth." },
        19: { title: "ì§ê´€ê²©", desc: "ê°ê°ì´ ì˜ˆë¯¼í•˜ì—¬ ë‚¨ë“¤ì´ ëª» ë³´ëŠ” ê¸°íšŒë¥¼ ì¡ìŠµë‹ˆë‹¤.", titleEn: "Visionary", descEn: "Sense trends before they are obvious." },
        20: { title: "ê²°ë‹¨ê²©", desc: "ë§ºê³  ëŠìŒì´ í™•ì‹¤í•˜ê³  ì‹ ë¢°ë¥¼ ë°›ëŠ” ì„±ê²©ì…ë‹ˆë‹¤.", titleEn: "Decisive", descEn: "Clear judgment makes you highly trusted." },
        21: { title: "ë‘ë ¹ê²©", desc: "ë§Œì¸ì„ í†µì†”í•˜ëŠ” ê¸°ì§ˆë¡œ í¬ê²Œ ì„±ê³µí•  ìš´ì…ë‹ˆë‹¤.", titleEn: "Commander", descEn: "Born with authority to lead and achieve." },
        22: { title: "ì›ë§Œê²©", desc: "ì„±ê²©ì´ ë¶€ë“œëŸ¬ì›Œ ëŒ€ì¸ê´€ê³„ê°€ ë§¤ìš° ì›ë§Œí•©ë‹ˆë‹¤.", titleEn: "Diplomat", descEn: "Gentle nature makes you a social master." },
        23: { title: "í˜ì‹ ê²©", desc: "ë³€í™”ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê³  ì‹œëŒ€ë¥¼ ì•ì„œê°‘ë‹ˆë‹¤.", titleEn: "Innovator", descEn: "A trailblazer who embraces the future." },
        24: { title: "ì…ì‹ ê²©", desc: "ë¹ˆì†ìœ¼ë¡œ ì‹œì‘í•´ë„ ì ì§„ì ìœ¼ë¡œ í° ë¶€ë¥¼ ì´ë£¹ë‹ˆë‹¤.", titleEn: "Wealthy", descEn: "Growth leads to significant prosperity." },
        25: { title: "ì•ˆê°•ê²©", desc: "ì„±ê²©ì´ ì›ë§Œí•˜ê³  í‰ìƒ í‰ì•ˆê³¼ ë³µì„ ëˆ„ë¦½ë‹ˆë‹¤.", titleEn: "Blessed", descEn: "Balanced character ensures a life of peace." }
    };

    const pastLifeData = [
        { job: "ë‹¬ë¹› ì•„ë˜ ì‹œë¥¼ ì“°ë˜ ì„ ë¹„", desc: "í•™ë¬¸ì— ì •ì§„í–ˆìœ¼ë‚˜ ì„¸ìƒì˜ í’íŒŒëŠ” í”¼í•˜ë ¤ í–ˆë˜ ê³ ê²°í•œ ì˜í˜¼ì´ì—ˆìŠµë‹ˆë‹¤.", homework: "ë‚˜ì˜ ì¬ëŠ¥ì„ ì„¸ìƒì— ë‹¹ë‹¹íˆ ë“œëŸ¬ë‚´ê¸°" },
        { job: "ê¶ê¶ì˜ ë‚®ì  ìë˜ ì‚¼ìƒ‰ ê³ ì–‘ì´", desc: "í‰í™”ë¡œìš´ ê¸°ìš´ìœ¼ë¡œ ì£¼ë³€ì„ ì¹˜ìœ í–ˆìœ¼ë‚˜ ìë¦½ì‹¬ì€ ì¡°ê¸ˆ ë¶€ì¡±í–ˆêµ°ìš”.", homework: "ìŠ¤ìŠ¤ë¡œ ì¼ì–´ì„œëŠ” ë…ë¦½ì‹¬ ê¸°ë¥´ê¸°" },
        { job: "ë¹„ë°€ ì •ì›ì„ ê°€ê¾¸ë˜ ì€ë‘” ì •ì›ì‚¬", desc: "ê½ƒë“¤ê³¼ ëŒ€í™”í•˜ë©° ì¡°ìš©íˆ ìì‹ ë§Œì˜ ì„¸ê³„ë¥¼ ì™„ì„±í–ˆìŠµë‹ˆë‹¤.", homework: "ì„¸ìƒ ë°–ìœ¼ë¡œ ë‚˜ì™€ ì‚¬ëŒë“¤ê³¼ ì†Œí†µí•˜ê¸°" },
        { job: "ê³ ë ¤ì‹œëŒ€ ì°¨(ì°¨)ë¥¼ ë‹¬ì´ë˜ ì¥ì¸", desc: "í•œ ì”ì˜ ì°¨ì— ì˜¨ ìš°ì£¼ë¥¼ ë‹´ê¸° ìœ„í•´ í‰ìƒì„ ë°”ì¹œ ì™„ë²½ì£¼ì˜ìì˜€ìŠµë‹ˆë‹¤.", homework: "ì¡°ê¸‰í•¨ì„ ë²„ë¦¬ê³  ê¸°ë‹¤ë¦¼ì˜ ë¯¸í•™ ë°°ìš°ê¸°" },
        { job: "ë§ˆì„ì˜ ì§€í˜œë¡œìš´ í• ë¨¸ë‹ˆ ì•½ì‚¬", desc: "í’€ë¿Œë¦¬ì™€ ê½ƒììœ¼ë¡œ ì´ì›ƒì˜ ì•„í”ˆ ë§ˆìŒì„ ì¹˜ìœ í•´ ì£¼ë˜ ì„±ìì˜€ìŠµë‹ˆë‹¤.", homework: "ë°°ë ¤í•˜ëŠ” ë§ˆìŒìœ¼ë¡œ ì£¼ë³€ ëŒë³´ê¸°" },
        { job: "ìˆ²ì˜ ì§€í˜œë¥¼ ì§€í‚¤ë˜ íŒŒìˆ˜ê¾¼", desc: "ìˆ˜ì²œ ë…„ì„ ì‚´ë©° ëŒ€ìì—°ì˜ íë¦„ì„ ì½ë˜ ì¡´ì¬ì˜€ìŠµë‹ˆë‹¤.", homework: "ìƒˆë¡œìš´ ë³€í™”ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê¸°" },
        { job: "ì¥í¬ë¹ˆì˜ ë¹„ë°€ ì¡°í–¥ì‚¬", desc: "ì‚¬ëŒì˜ ë§ˆìŒì„ í™€ë¦¬ëŠ” í–¥ê¸°ë¥¼ ì—°êµ¬í•˜ë˜ ë§¤ë ¥ì ì¸ ì¸ë¬¼ì´ì—ˆìŠµë‹ˆë‹¤.", homework: "ëˆ„êµ°ê°€ì—ê²Œ íœ˜ë‘˜ë¦¬ì§€ ì•ŠëŠ” ì£¼ê´€ ê°–ê¸°" },
        { job: "ê¶ì¤‘ ë¬´ìš©ì˜ ì£¼ì¸ê³µ", desc: "ì•„ë¦„ë‹¤ìš´ ëª¸ì§“ìœ¼ë¡œ ì™•ì˜ ë§ˆìŒê¹Œì§€ ì‚¬ë¡œì¡ì•˜ë˜ ë¬´ìš©ìˆ˜ì˜€ìŠµë‹ˆë‹¤.", homework: "ìì‹ ì˜ ì—´ì •ì„ ì˜¬ë°”ë¥¸ ê³³ì— ìŸê¸°" },
        { job: "ì„±ê°€ëŒ€ì˜ ëª©ì†Œë¦¬ ì¢‹ì€ ì†”ë¦¬ìŠ¤íŠ¸", desc: "ì²œìƒì˜ ëª©ì†Œë¦¬ë¡œ ì‚¬ëŒë“¤ì˜ ì˜í˜¼ì„ ìš¸ë¦¬ë˜ ì´ì˜€ìŠµë‹ˆë‹¤.", homework: "ë‚˜ì˜ ì§„ì‹¤ëœ ëª©ì†Œë¦¬ë¥¼ ë‹¹ë‹¹í•˜ê²Œ ë‚´ë±‰ê¸°" },
        { job: "ì „ì¥ì˜ ì†Œì‹ì„ ì „í•˜ë˜ ì „ë ¹", desc: "ë°¤ë‚®ì—†ì´ ë‹¬ë ¤ ì•½ì†ì„ ì§€ì¼°ë˜ ê°€ì¥ ì±…ì„ê° ìˆëŠ” ë¶„ì´ì—ˆìŠµë‹ˆë‹¤.", homework: "ì•½ì†ì˜ ì†Œì¤‘í•¨ì„ ëê¹Œì§€ ì§€í‚¤ê¸°" },
        { job: "ë¶ˆê½ƒë†€ì´ë¥¼ ì„¤ê³„í•˜ë˜ í™”ì•½ ê¸°ìˆ ì", desc: "í•œìˆœê°„ì˜ ì°¬ë€í•¨ì„ ìœ„í•´ í‰ìƒì„ ì–´ë‘  ì†ì—ì„œ ì—°êµ¬í–ˆìŠµë‹ˆë‹¤.", homework: "ì¼ìƒì˜ ì†Œì†Œí•œ í–‰ë³µì—ì„œ ë¹›ì„ ì°¾ê¸°" },
        { job: "ê³ ëŒ€ ì´ì§‘íŠ¸ì˜ íƒœì–‘ì‹  ì‚¬ì œ", desc: "íƒœì–‘ì˜ ì—´ê¸°ë¥¼ ê¸°ë„ë¡œ ìŠ¹í™”ì‹œí‚¤ë˜ ì‹ ì„±í•œ ì¸ë¬¼ì´ì—ˆìŠµë‹ˆë‹¤.", homework: "ë‚´ë©´ì˜ í™”ë¥¼ ë‹¤ìŠ¤ë¦¬ê³  í‰ì˜¨ì„ ì°¾ê¸°" },
        { job: "ìœ ëŸ½ ì„±ë¬¸ì„ ì§€í‚¤ë˜ ë¬¸ì§€ê¸°", desc: "ì„±ì‹¤í•˜ê²Œ ìë¦¬ë¥¼ ì§€ì¼°ìœ¼ë‚˜ ì •ì‘ ë³¸ì¸ì˜ ì„± ë°– êµ¬ê²½ì€ ëª» í–ˆêµ°ìš”.", homework: "ë‚¯ì„  ê³³ìœ¼ë¡œ ì—¬í–‰í•˜ë©° ì‹œì•¼ ë„“íˆê¸°" },
        { job: "ê¹Šì€ ì‚°ì† ë„ë¥¼ ë‹¦ë˜ ë°”ìœ„", desc: "ìˆ˜ë°± ë…„ê°„ í•œ ìë¦¬ë¥¼ ì§€í‚¤ë©° ì„¸ìƒì˜ ë³€í™”ë¥¼ ì§€ì¼œë´¤ìŠµë‹ˆë‹¤.", homework: "ê³ ì§‘ì„ ë²„ë¦¬ê³  ìœ ì—°í•˜ê²Œ ëŒ€ì²˜í•˜ê¸°" },
        { job: "ì•Œí”„ìŠ¤ ì‚°ë§¥ì˜ í‰í™”ë¡œìš´ ì–‘ì¹˜ê¸°", desc: "ê´‘í™œí•œ ì´ˆì›ì—ì„œ ì–‘ë“¤ê³¼ í•¨ê»˜ êµ¬ë¦„ì„ êµ¬ê²½í•˜ë©° ì‚´ì•˜ìŠµë‹ˆë‹¤.", homework: "ë³µì¡í•œ ìƒê° ë¹„ìš°ê³  ë‹¨ìˆœí•˜ê²Œ ì‚´ê¸°" },
        { job: "ê³ ê¶ì˜ ê¸°ì™€ë¥¼ ì˜¬ë¦¬ë˜ ì¥ì¸", desc: "ìˆ˜ì²œ ì¥ì˜ ê¸°ì™€ë¥¼ ì˜¬ë¦¬ë©° ëˆ„êµ°ê°€ì˜ ì•ˆì‹ì„ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.", homework: "ê¸°ì´ˆë¶€í„° ì°¨ê·¼ì°¨ê·¼ ë‹¤ì§€ëŠ” ì¸ë‚´ì‹¬ ê°–ê¸°" },
        { job: "ëŒ€ë¥™ì„ ëˆ„ë¹„ë˜ ê±°ìƒì˜ êµ°ë§ˆ", desc: "ìš©ë§¹í•˜ê²Œ ë‹¬ë¦¬ë©° ë¶€ë¥¼ ì¶•ì í•˜ëŠ” ë° í° ê³µì„ ì„¸ì› ë˜ ì¡´ì¬ì…ë‹ˆë‹¤.", homework: "ìì‹ ì˜ ê±´ê°•ê³¼ ëª¸ì„ ì†Œì¤‘íˆ ì•„ë¼ê¸°" },
        { job: "ì‚¬ë§‰ì˜ ì˜¤ì•„ì‹œìŠ¤ ìˆ˜í˜¸ì", desc: "ì—¬í–‰ìë“¤ì—ê²Œ ìƒëª…ìˆ˜ë¥¼ ë‚˜ëˆ„ì–´ ì£¼ë˜ ìë¹„ë¡œìš´ ì‚¬ëŒì´ì—ˆìŠµë‹ˆë‹¤.", homework: "ì—¬ìœ ë¡œìš´ ë§ˆìŒìœ¼ë¡œ ë‚˜ëˆ”ì˜ ê¸°ì¨ ì•Œê¸°" },
        { job: "ì„œë¶€ ì‹œëŒ€ ë³´ì•ˆê´€ì˜ ë‚¡ì€ ë°°ì§€", desc: "ì •ì˜ë¥¼ ì§€í‚¤ê¸° ìœ„í•´ ëˆ„êµ°ê°€ì˜ ê°€ìŠ´ ìœ„ì—ì„œ ë¹›ë‚˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.", homework: "ì˜¬ë°”ë¥¸ ê°€ì¹˜ê´€ì„ ì§€í‚¤ëŠ” ìš©ê¸° ë‚´ê¸°" },
        { job: "ë¹„ë°€ ì§€ë„ë¥¼ ì§€í‚¤ë˜ ì „ì„¤ì˜ ê²€ê°", desc: "ì§€ì¼œì•¼ í•  ê°€ì¹˜ë¥¼ ìœ„í•´ ê²€ í•œ ìë£¨ë¡œ ì„¸ìƒì„ ì‚´ì•˜ìŠµë‹ˆë‹¤.", homework: "ìì‹ ë§Œì˜ ì›ì¹™ì„ ì„¸ìš°ê³  ì§€í‚¤ê¸°" },
        { job: "ë°”ì´í‚¹ ì„ ë‹¨ì˜ ê¸¸ì¡ì´ ê¹Œë§ˆê·€", desc: "ê°€ì¥ ë†’ì€ ê³³ì—ì„œ ë°”ëŒì˜ ë°©í–¥ì„ ì½ì–´ ë°°ë¥¼ ì¸ë„í–ˆìŠµë‹ˆë‹¤.", homework: "í™•ì‹ ì´ ì—†ì„ ë•Œ ë³¸ì¸ì˜ ì§ê°ì„ ë¯¿ê¸°" },
        { job: "ì–´ëŠ ë°œëª…ê°€ì˜ ì‹¤íŒ¨í•œ íƒœì—½ ì‹œê³„", desc: "ë¹„ë¡ ë©ˆì·„ì§€ë§Œ ë°œëª…ê°€ì—ê²Œ í° ì˜ê°ì„ ì£¼ì—ˆë˜ ì¡´ì¬ì˜€ìŠµë‹ˆë‹¤.", homework: "ì‹¤íŒ¨ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê³  ë‹¤ì‹œ ë„ì „í•˜ê¸°" },
        { job: "í™©ê¸ˆ ì‚¬ë§‰ì˜ ì§€ë„ë¥¼ ê·¸ë¦¬ë˜ í•™ì", desc: "ì •í™•í•œ ì„  í•˜ë‚˜ë¡œ ì‚¬ëŒë“¤ì˜ ìƒëª…ì„ êµ¬í•˜ë˜ ì´ì˜€ìŠµë‹ˆë‹¤.", homework: "ê²°ê³¼ë³´ë‹¤ ê³¼ì •ì„ ì¦ê¸°ëŠ” ì—¬ìœ  ê°–ê¸°" },
        { job: "ì°¨ê°€ìš´ ë¶ê·¹í•´ë¥¼ ê±´ë„ˆë˜ ì‡„ë¹™ì„  ë‹»", desc: "ê±°ì¹œ ì–¼ìŒì„ ê¹¨ê³  ê¸¸ì„ ë‚´ë˜ ë‹¨ë‹¨í•œ ì˜ì§€ì˜ ì†Œìœ ìì˜€ìŠµë‹ˆë‹¤.", homework: "ë”±ë”±í•œ ë§ˆìŒì„ ë¶€ë“œëŸ½ê²Œ ë…¹ì´ëŠ” ì—°ìŠµ" },
        { job: "ê³ ëŒ€ ë³„ì„ ì½ë˜ ì²œë¬¸í•™ì", desc: "ë°¤ë§ˆë‹¤ í•˜ëŠ˜ì˜ ì§€ë„ë¥¼ ê·¸ë¦¬ë©° ìš°ì£¼ì˜ ì„­ë¦¬ë¥¼ ê³ ë¯¼í–ˆìŠµë‹ˆë‹¤.", homework: "ì‘ì€ ê³ ë¯¼ë³´ë‹¤ ì¸ìƒì˜ í° íë¦„ ë°”ë¼ë³´ê¸°" },
        { job: "ë°”ë‹¤ ê±´ë„ˆ ë³´ë¬¼ì„ íŒŒëŠ” ìƒì¸", desc: "ì‚¬ëŒë“¤ì˜ í˜¸ê¸°ì‹¬ì„ ìê·¹í•˜ë˜ ìœ ì—°í•œ ì¸ë¬¼ì´ì—ˆìŠµë‹ˆë‹¤.", homework: "ë¬¼ì§ˆì ì¸ ê²ƒë³´ë‹¤ ì •ì‹ ì ì¸ ê°€ì¹˜ ì°¾ê¸°" },
        { job: "ì €ì£ê±°ë¦¬ì˜ ì†Œë¬¸ë‚œ ì´ì•¼ê¸°ê¾¼", desc: "ì…ë‹´ í•˜ë‚˜ë¡œ ì˜¨ ë§ˆì„ ì‚¬ëŒë“¤ì˜ ë§ˆìŒì„ ì ì‹œë˜ ì¸ê¸°ì¸ì´ì—ˆìŠµë‹ˆë‹¤.", homework: "ì§„ì‹¤í•œ ì–¸ì–´ì˜ í˜ì„ ì˜¬ë°”ë¥´ê²Œ ì‚¬ìš©í•˜ê¸°" },
        { job: "ì´ë¦„ ëª¨ë¥¼ ì„¬ì˜ ì§„ì£¼ë¥¼ ì¤ë˜ í•´ë…€", desc: "ê¹Šì€ ë°”ë‹¤ ë°‘ì—ì„œ ë³´ì„ ê°™ì€ ìˆœê°„ì„ ê±´ì ¸ ì˜¬ë¦¬ë˜ ì´ì˜€ìŠµë‹ˆë‹¤.", homework: "ê°€ì¥ ì†Œì¤‘í•œ ê²ƒì€ ëŠ˜ ê°€ê¹Œì´ì— ìˆìŒì„ ê¹¨ë‹«ê¸°" },
        { job: "ê°•ê°€ì—ì„œ ì„¸ì›”ì„ ë‚šë˜ ê°•íƒœê³µ", desc: "ë¬¼ê²°ì„ ë³´ë©° ì„œë‘ë¥´ì§€ ì•ŠëŠ” ì—¬ìœ ë¥¼ ì¦ê¸°ë˜ í˜„ìì˜€ìŠµë‹ˆë‹¤.", homework: "ê²°ê³¼ë³´ë‹¤ ê³¼ì •ì„ ì¦ê¸°ëŠ” ë²• ìµíˆê¸°" },
        { job: "ì„¤ì‚°ì˜ ëˆˆì„ ì¹˜ìš°ë˜ ìˆ˜ë„ìŠ¹", desc: "í•˜ì–—ê²Œ ë‚´ë¦° ëˆˆì„ ì¹˜ìš°ë©° ë§ˆìŒì˜ ë²ˆë‡Œë¥¼ ì”»ì–´ëƒˆìŠµë‹ˆë‹¤.", homework: "ë³µì¡í•œ ë¨¸ë¦¿ì†ì„ ìˆ˜ì‹œë¡œ ì •ë¦¬í•˜ê¸°" }
    ];

    const reincarnationData = [
        { place: "ìŠ¤ìœ„ìŠ¤ ì•Œí”„ìŠ¤ ëª©ì¥", object: "ëª…í’ˆ ì –ì†Œ", mission: "ì‹ ì„ í•œ ê³µê¸° 3ë²ˆ ë§ˆì‹œê³  íë§í•˜ê¸°" },
        { place: "ì‹¤ë¦¬ì½˜ë°¸ë¦¬ ì²œì¬ì˜ ì„œì¬", object: "ê¸°ê³„ì‹ í‚¤ë³´ë“œ", mission: "ìŠ¤ìŠ¤ë¡œì—ê²Œ 'ì˜¤ëŠ˜ ì˜í–ˆì–´'ë¼ê³  ë§í•´ì£¼ê¸°" },
        { place: "ê°•ë‚¨ ì¬ë²Œì§‘ ê±°ì‹¤", object: "ì‚¬ë‘ë°›ëŠ” í’ˆì¢…ë¬˜", mission: "ëŠê¸‹í•˜ê²Œ ìŠ¤íŠ¸ë ˆì¹­ 3ë²ˆ í•˜ê¸°" },
        { place: "ì œì£¼ë„ í‘¸ë¥¸ ë°”ë‹¤", object: "ììœ ë¡œìš´ ëŒê³ ë˜", mission: "ì¢‹ì•„í•˜ëŠ” ë…¸ë˜ í•œ ì†Œì ˆ ë¶€ë¥´ê¸°" },
        { place: "ë¶ìœ ëŸ½ ë„ì„œê´€", object: "ë² ìŠ¤íŠ¸ì…€ëŸ¬ ì±…", mission: "ì±… í•œ í˜ì´ì§€ ì½ìœ¼ë©° ì§€ì‹ ì¶©ì „í•˜ê¸°" },
        { place: "ìš°ì£¼ì˜ ë¹›ë‚˜ëŠ” í–‰ì„±", object: "ì§€ì§€ ì•ŠëŠ” ê½ƒ", mission: "ê±°ìš¸ ë³´ê³  ë°ê²Œ í•œë²ˆ ì›ƒì–´ë³´ê¸°" },
        { place: "ë‰´ìš• ì„¼íŠ¸ëŸ´ íŒŒí¬", object: "ì—¬ìœ ë¡œìš´ ë²¤ì¹˜", mission: "í–‡ë³• 5ë¶„ ì¬ê¸°" },
        { place: "íŒŒë¦¬ ì—í íƒ‘ ê·¼ì²˜ í™”ë°©", object: "ì˜ˆìˆ ê°€ì˜ ë¶“", mission: "ë¬´ì–¸ê°€ ê·¸ë ¤ë³´ê¸°" },
        { place: "í•˜ì™€ì´ í•´ë³€", object: "ë©‹ì§„ ì„œí•‘ë³´ë“œ", mission: "ë¬¼ í•œ ì” ë§ˆì‹œê¸°" },
        { place: "ëŸ°ë˜ì˜ ë ˆì½”ë“œ ìˆ", object: "ì˜¤ë˜ëœ LPíŒ", mission: "ìŒì•… ëê¹Œì§€ ë“£ê¸°" },
        { place: "ë¯¸ë˜ì˜ í™”ì„± ì‹ë¯¼ì§€", object: "ìµœì´ˆì˜ ì‚¬ê³¼ë‚˜ë¬´", mission: "ìƒí¼í•œ ê³¼ì¼ í•œ ì¡°ê° ë¨¹ê¸°" },
        { place: "ì¼ë³¸ ì˜¨ì²œ ë§ˆì„", object: "í–‰ë³µí•œ ì›ìˆ­ì´", mission: "ë”°ëœ»í•œ ë¬¼ë¡œ ë°œì˜ í”¼ë¡œ í’€ì–´ì£¼ê¸°" },
        { place: "ëª°ë””ë¸Œ ë°”ë‹¤ ì•„ë˜", object: "ì•„ë¦„ë‹¤ìš´ ì‚°í˜¸ì´ˆ", mission: "íŒŒë€ìƒ‰ ë¬¼ê±´ ë³´ê¸°" },
        { place: "ë™í™” ì† ì„±ê³½ ìœ„", object: "ì†œì‚¬íƒ• êµ¬ë¦„", mission: "í•˜ëŠ˜ 5ì´ˆ ë°”ë¼ë³´ê¸°" },
        { place: "ìœ ëª…í•œ ë¹µì§‘", object: "ê°“ êµ¬ìš´ í¬ë£¨ì•„ìƒ", mission: "ë§›ìˆëŠ” ê°„ì‹ ë¨¹ê¸°" },
        { place: "ìµœê³ ê¸‰ í˜¸í…”", object: "í­ì‹ í•œ ê¹ƒí„¸ ë² ê°œ", mission: "ìê¸° ì „ ë² ê°œ ì •ëˆí•˜ê¸°" },
        { place: "êµí† ì˜ ë²šê½ƒ ê±°ë¦¬", object: "í©ë‚ ë¦¬ëŠ” ë²šê½ƒì", mission: "ì£¼ë³€ ê½ƒ êµ¬ê²½í•˜ê¸°" },
        { place: "ë‚¨ê·¹ì˜ ì–¼ìŒ ê¸°ì§€", object: "ì•„ê¸° í­ê·„", mission: "ë™ë¬¼ ì˜ìƒ ë³´ê¸°" },
        { place: "ì—°ì˜ˆì¸ì˜ ê°€ë°© ì†", object: "ìµœì•  ë¦½ìŠ¤í‹±", mission: "ë¬¼ê±´ í•˜ë‚˜ ì •ì„±ê» ë‹¦ê¸°" },
        { place: "ë¡œë§ˆ ê´‘ì¥", object: "ë©‹ì§„ ì¡°ê°ìƒ", mission: "ë‚´ ì¥ì  í•˜ë‚˜ ë– ì˜¬ë¦¬ê¸°" },
        { place: "ë¶ê·¹ì˜ ë°¤í•˜ëŠ˜", object: "ê°€ì¥ ë°ì€ ë¶ê·¹ì„±", mission: "ì˜¤ëŠ˜ ë°¤ ë³„ ì°¾ì•„ë³´ê¸°" },
        { place: "ë¶€ì ë™ë„¤ ì •ì›", object: "ììœ¨ì£¼í–‰ ì”ë””ê¹ì´", mission: "ì£¼ë³€ ì •ë¦¬ 1ë¶„ í•˜ê¸°" },
        { place: "í‹°ë² íŠ¸ ê³ ì› ì‚¬ì›", object: "ë§‘ì€ ì¢…ì†Œë¦¬", mission: "ì°¨ë¶„í•œ ìŒì•… ë“£ê¸°" },
        { place: "ëŒ€ë‚˜ë¬´ ìˆ²", object: "ì¸ê¸° ë§Œì  íŒë‹¤", mission: "ê²Œìœ¼ë¦„ í”¼ì›Œë³´ê¸°" },
        { place: "ì˜í™” ì´¬ì˜ì¥", object: "ì£¼ì¸ê³µì˜ ëŒ€ë³¸", mission: "ê¸ì •ì ì¸ ë‹¨ì–´ í•˜ë‚˜ ì¨ë³´ê¸°" },
        { place: "ì‚°í† ë¦¬ë‹ˆ ì§€ë¶• ìœ„", object: "ëŠê¸‹í•œ ê³ ì–‘ì´", mission: "ë°”ë‹¤ ì‚¬ì§„ ë³´ê¸°" },
        { place: "ê³µê¸° ë§‘ì€ ìˆ²", object: "ë°”ì˜¤ë°¥ë‚˜ë¬´", mission: "ì‹¬í˜¸í¡ 3ë²ˆ í•˜ê¸°" },
        { place: "ê¿ˆì˜ ë†€ì´ê³µì›", object: "ì˜¤ìƒ‰ í’ì„ ", mission: "ì¢‹ì€ ìƒìƒ 1ë¶„ í•˜ê¸°" },
        { place: "ëŒ€í˜• í¬ë£¨ì¦ˆì„ ", object: "ë°”ëŒì„ ì½ëŠ” ë›", mission: "ê°€ê³  ì‹¶ì€ ì—¬í–‰ì§€ ê²€ìƒ‰í•´ë³´ê¸°" },
        { place: "ì†Œì¤‘í•œ ì‚¬ì§„ì²©", object: "ì‚¬ì§„ ì† ì¸ë¬¼", mission: "í–‰ë³µí•œ ê¸°ì–µ ë– ì˜¬ë¦¬ê¸°" }
    ];

    const sideEffects = ["ë””ì €íŠ¸ ë¬´í•œ í¡ì… ì£¼ì˜", "ì–‘ë§ í•œ ì§ ì˜ì›íˆ ì‹¤ì¢…", "ì „ìƒì´ ë°”ìœ„ì¸ ë“¯í•œ ë©í•¨", "ë…¸ë˜ ê°€ì‚¬ê°€ ë‚´ ì–˜ê¸° ê°™ìŒ", "ëƒ‰ì¥ê³  ì²­ì†Œ ìš•êµ¬ í­ë°œ", "ëœ¬ê¸ˆì—†ëŠ” ìœ™í¬ ì¤‘ë…", "ì™¼ìª½ ì½§êµ¬ë©ë§Œ ê°„ì§€ëŸ¬ì›€", "ê±°ìš¸ ì† ë‚´ ëª¨ìŠµì— ì·¨í•¨", "ë¹„ë‘˜ê¸°ì™€ ëŒ€í™” ì‹œë„", "ì´ë¶ˆ ë°–ì´ ìœ„í—˜í•´ ë³´ì„", "ê°‘ìê¸° ìœˆë“œë°€ ê°€ëŠ¥í•  ê²ƒ ê°™ìŒ", "ì•ŒëŒ ì†Œë¦¬ê°€ êµí–¥ê³¡ ê°™ìŒ", "íš¡ë‹¨ë³´ë„ í°ìƒ‰ë§Œ ë°ŸìŒ", "ë‚˜ë­‡ìì—ê²Œ ì´ë¦„ ì§€ì–´ì¤Œ", "ì†ê°€ë½ í•˜íŠ¸ ë¬´ì˜ì‹ ë°œì‚¬", "ì±„ì†Œê°€ ê³ ê¸° ë§›ìœ¼ë¡œ ëŠê»´ì§", "ì›ƒìŒì†Œë¦¬ê°€ ìŒí•˜í•˜ë¡œ ë³€í•¨", "ëª¨ë“  ë¹„ë°€ì„ ì•„ëŠ” ë“¯í•œ ëˆˆë¹›", "ì¶¤ì„ ì•ˆ ì¶”ë©´ ëª¸ì´ ê·¼ì§ˆê±°ë¦¼", "ì§€ë‚˜ê°€ëŠ” ê°œë¯¸ì—ê²Œ í›ˆìˆ˜ ë‘ ", "ê³µê¸°ëŠ” ë¬´ë£Œì„ì„ ì‹¤ê°í•˜ë©° ê°ë™", "ëª¨ë¸ ì›Œí‚¹ìœ¼ë¡œ ê±·ê³  ì‹¶ìŒ", "ë‚´ì¼ ì ì‹¬ì´ 4Kë¡œ ê¿ˆì— ë‚˜ì˜´", "10ë…„ ì „ í‘ì—­ì‚¬ ê³ í™”ì§ˆ ê¸°ì–µ", "ê³„ë‹¨ í•œ ì¹¸ì”© ê±´ë„ˆë›°ëŠ” í™œë ¥", "ì§€ê°‘ ê°€ë²¼ì›Œë„ ë¶€ìì¸ ì²™", "ìš°ì£¼ì¸ê³¼ êµì‹  ì‹œë„", "ì§€ë‚˜ê°€ëŠ” ê³ ì–‘ì´ê°€ ì¸ì‚¬í•¨", "ì„¸ìƒì´ ë¼ë²¤ë”ìƒ‰ìœ¼ë¡œ ë³´ì„", "ëƒ‰ì¥ê³  ëª¨ë“  ì†ŒìŠ¤ ìœ í†µê¸°í•œ í™•ì¸", "í˜¼ìì„œ íŒŒí‹° ê°œìµœ", "ê°€ì¥ ì˜ˆìœ ì“°ë ˆê¸° ì€í‡´ì‹", "ë°”ëŒì—ê²Œ ìœ™í¬ ë‚ ë¦¼", "ì‹ ë°œ ì¢Œìš° ë°”ê¿” ì‹ ì–´ë³´ê¸°", "ë“¤ê½ƒì—ê²Œ ì¸ìƒ ê³ ë¯¼ ìƒë‹´", "ìš°ì•„í•œ ì†ì§“ìœ¼ë¡œ ë¬¼ ë§ˆì‹œê¸°", "ê±°ìš¸ ë³´ë©° ë³¸ì¸ ì°¬ì–‘ 5ë²ˆ", "ì¼ê¸° í•œ ì¤„ì„ ì‹œì²˜ëŸ¼ ì“°ê¸°", "ë³´ë¼ìƒ‰ ë¬¼ê±´ ë³´ë©´ ë°˜ê°€ì›€", "ì–‘ë§ í•œ ìª½ë§Œ ì‹ ê³  ë‹¬ë¦¬ê¸°", "ì„¸ìƒì´ ë‚˜ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ë„ëŠ” ì°©ê°"];
    const sideEffectsEn = ["Dessert craving", "Missing socks forever", "Feeling like a rock", "Lyrics feel too real", "Cleaning obsession", "Random winking", "Nostril itching", "Self-love overload", "Talking to birds", "Blanket addiction", "Windmill spin confidence", "Alarm sounds like music", "Crosswalk obsession", "Naming leaves", "Finger heart reflex", "Vegetables taste like meat", "Evil laugh mutation", "Omniscient look", "Itchy feet for dancing", "Advising ants", "Gratitude for free air", "Supermodel walking", "4K lunch dreams", "HD cringe memories", "Stair skipping power", "Acting like a millionaire", "Alien communication", "Cat says hello", "Lavender filter world", "Sauce bottle audit", "Solo party host", "Trash retirement ceremony", "Winking at wind", "Wrong shoe experiment", "Consulting wildflowers", "Elegant water sipping", "Mirror worship", "Poetic diary writing", "Purple item hunting", "Running with one sock", "Center of universe delusion"];
    const quoteData = { "ì¸ìƒ": [ { text: "ëª¨ë“  ê½ƒì€ ì €ë§ˆë‹¤ì˜ ì‹œê°„ì— í•€ë‹¤." }, { text: "ì¸ìƒì€ ì†ë„ê°€ ì•„ë‹ˆë¼ ë°©í–¥ì´ë‹¤." }, { text: "ì§€ê¸ˆ ê·¸ëŒ€ë¡œ ë‹¹ì‹ ì€ ì¶©ë¶„í•˜ë‹¤." }, { text: "ì–´ë‘ìš´ ë°¤ì¼ìˆ˜ë¡ ë³„ì€ ë¹›ë‚œë‹¤." }, { text: "ì–´ì œë³´ë‹¤ ë‚˜ì€ ì˜¤ëŠ˜ì˜ ë‚˜ë¥¼ ì‚¬ë‘í•˜ë¼." }, { text: "ì‚¶ì´ ìˆëŠ” í•œ í¬ë§ì€ ìˆë‹¤." }, { text: "í–‰ë³µì€ ì„ íƒí•˜ëŠ” ê²ƒì´ë‹¤." }, { text: "ë‚´ì¼ì˜ ë‚˜ë¥¼ ë§Œë“œëŠ” ê²ƒì€ ì˜¤ëŠ˜ì˜ ì¸ë‚´ë‹¤." }, { text: "ê¸¸ì´ ì—†ìœ¼ë©´ ê¸¸ì„ ì°¾ì•„ë¼." }, { text: "ê°€ì¥ ì–´ë‘ìš´ ë°¤ë„ í•´ëœ¨ê¸° ì§ì „ì— ëë‚œë‹¤." }, { text: "ìƒê°í•˜ëŠ” ëŒ€ë¡œ ì‚´ì§€ ì•Šìœ¼ë©´ ì‚¬ëŠ” ëŒ€ë¡œ ìƒê°í•˜ê²Œ ëœë‹¤." }, { text: "ì™„ë²½í•¨ë³´ë‹¤ ì™„ë£Œí•¨ì´ ë‚«ë‹¤." }, { text: "ë„ˆ ìì‹ ì´ ë˜ì–´ë¼. ë‹¤ë¥¸ ì‚¬ëŒì€ ì´ë¯¸ ë‹¤ ì°¨ ìˆë‹¤." }, { text: "ì¸ìƒì€ ì†ë„ê°€ ì•„ë‹ˆë¼ ë°©í–¥ì´ë‹¤." }, { text: "ì‘ì€ ê²ƒì— ê°ì‚¬í•  ì¤„ ì•„ëŠ” ì‚¬ëŒì´ ë¶€ìë‹¤." }, { text: "í–‰ë³µì€ ëª©ì ì§€ê°€ ì•„ë‹ˆë¼ ì—¬í–‰í•˜ëŠ” ê³¼ì •ì´ë‹¤." }, { text: "í­í’ìš°ë¥¼ í”¼í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼ ë¹—ì†ì—ì„œ ì¶¤ì¶”ëŠ” ë²•ì„ ë°°ìš°ëŠ” ê²ƒì´ë‹¤." }, { text: "ì˜¤ëŠ˜ í•˜ë£¨, ë‹¹ì‹ ì€ ì¶©ë¶„íˆ ì˜í•´ëƒˆë‹¤." }, { text: "ì‹¤íŒ¨ëŠ” ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ìˆëŠ” ê¸°íšŒì¼ ë¿ì´ë‹¤." }, { text: "ë‚´ë©´ì˜ í‰í™”ê°€ ê°€ì¥ í° ì„±ê³µì´ë‹¤." } ] };

    const i18n = {
        ko: { title: "ì„±ëª…í•™ ë°ì´í„° ë¶„ì„", desc: "ì´ë¦„ì˜ íŒŒë™ ì—ë„ˆì§€ì™€ ì‚¬ì£¼ì˜ ê³„ì ˆì  ìš”ì¸ì„ ê²°í•©í•˜ì—¬ ê³ ìœ í•œ ìš´ëª… ê¸°ìš´ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.", nameLabel: "ì„±í•¨", birthLabel: "ì–‘ë ¥ 8ìë¦¬ (1000-2150)", btn: "ë¦¬í¬íŠ¸ ìƒì„±í•˜ê¸°", reset: "ì´ˆê¸°í™”", tab1: "í˜„ìƒ ë¶„ì„", tab2: "ì „ìƒ ê¸°ë¡", tab3: "ë‚´ì„¸ ì˜ˆì•½", copy: "ë§í¬ ë³µì‚¬", sec1: "[ì„±ëª…í•™ì  ê²°ê³¼ ë¶„ì„]", sec2: "[ê°•ì  ì˜¤í–‰ì˜ ê¸°ìš´]", sec3: "[ë¶€ì¡± ì˜¤í–‰ì˜ ë³´ì™„]", advise: "ìš´ëª… ì¡°ì–¸", practice: "ì‹¤ì²œ í–‰ë²•", sideEffect: "ê³¼ìœ ë¶ˆê¸‰ ë¶€ì‘ìš©", pastJob: "ì „ìƒì˜ ì§ì—…", pastHomework: "í˜„ìƒì˜ ìˆ™ì œ", nextDest: "í™˜ìƒ ì¥ì†Œ", nextObj: "í™˜ìƒ í˜•íƒœ", nextMission: "ë¶€ì—¬ëœ ì†Œëª…" },
        en: { title: "Destiny Analysis", desc: "Extracts unique energy by combining name vibrations with seasonal factors.", nameLabel: "Name", birthLabel: "Birthdate (1000-2150)", btn: "Generate Report", reset: "Reset", tab1: "Present", tab2: "Past Life", tab3: "Future", copy: "Copy Link", sec1: "[Numerology Result]", sec2: "[Core Energy]", sec3: "[Remedy Guide]", advise: "Advice", practice: "Action", sideEffect: "Side Effects", pastJob: "Past Identity", pastHomework: "Soul Goal", nextDest: "Destination", nextObj: "Born As", nextMission: "Mission" }
    };

    const elementPrescriptions = { 
        "æœ¨": { veryStrong: "ê¸°ìš´ì´ ê³¼í•´ ë…ë‹¨ì ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª…ìƒì´ í•„ìˆ˜ì…ë‹ˆë‹¤.", strong: "ì¶”ì§„ë ¥ì´ í›Œë¥­í•©ë‹ˆë‹¤. ëê¹Œì§€ ë§ˆë¬´ë¦¬í•˜ì„¸ìš”.", normal: "ì•ˆì •ì ì¸ ì„±ì¥ì˜ ì‹œê¸°ì…ë‹ˆë‹¤. ë¦¬ë“¬ì„ ì§€í‚¤ì„¸ìš”.", weak: "ì˜ìš• ë³´ì¶©ì´ í•„ìš”í•©ë‹ˆë‹¤. ì•„ì¹¨ ì‚°ì±…ì„ í•˜ì„¸ìš”.", veryWeak: "ìƒê¸°ê°€ ê³ ê°ˆëœ ìƒíƒœì…ë‹ˆë‹¤. ì´ˆë¡ìƒ‰ ì˜·ì´ ê¸¸í•©ë‹ˆë‹¤." },
        "ç«": { veryStrong: "ë²ˆì•„ì›ƒì´ ì˜¤ê¸° ì‰½ìŠµë‹ˆë‹¤. ì—´ê¸°ë¥¼ ì‹íˆì„¸ìš”.", strong: "ì—´ì •ì´ ê°€ë“í•©ë‹ˆë‹¤. ì—ë„ˆì§€ë¥¼ ë‚˜ëˆ„ì„¸ìš”.", normal: "ë°ê³  ë”°ëœ»í•©ë‹ˆë‹¤. ì˜ˆì˜ë¥¼ ê°–ì¶”ë©´ ë³µì´ ì˜µë‹ˆë‹¤.", weak: "ì˜ìš•ì´ ì €í•˜ë˜ì—ˆìŠµë‹ˆë‹¤. í–‡ë³•ì„ 20ë¶„ê°„ ì¬ì„¸ìš”.", veryWeak: "ë¬´ê¸°ë ¥í•˜ê¸° ì‰½ìŠµë‹ˆë‹¤. ë¶‰ì€ìƒ‰ ì†Œí’ˆì´ ì¢‹ìŠµë‹ˆë‹¤." },
        "åœŸ": { veryStrong: "ìƒê°ì´ ì •ì²´ë˜ê¸° ì‰½ìŠµë‹ˆë‹¤. í™˜ê²½ì„ ë°”ê¾¸ì„¸ìš”.", strong: "í¬ìš©ë ¥ì´ ì¢‹ìŠµë‹ˆë‹¤. ë‚¨ì„ ë•ëŠ” ê²ƒì´ ìš´ì„ ì—½ë‹ˆë‹¤.", normal: "ì•ˆì •ê°ì´ í›Œë¥­í•©ë‹ˆë‹¤. ë…ì„œê°€ ë³´ì•½ì…ë‹ˆë‹¤.", weak: "ê¸°ë°˜ì´ í”ë“¤ë¦½ë‹ˆë‹¤. ë§¨ë°œë¡œ í™ì„ ë°Ÿìœ¼ì„¸ìš”.", veryWeak: "ìì‹ ê°ì´ ë°”ë‹¥ì…ë‹ˆë‹¤. ë‹¬ì½¤í•œ ìŒì‹ì´ ê¸¸í•©ë‹ˆë‹¤." },
        "é‡‘": { veryStrong: "íŒë‹¨ì´ ë‚ ì¹´ë¡œì›Œ íƒ€ì¸ì„ ì•„í”„ê²Œ í•©ë‹ˆë‹¤.", strong: "ê²°ë‹¨ë ¥ì´ ì¢‹ìŠµë‹ˆë‹¤. ì •ë¦¬ì— ì¢‹ì€ ë•Œì…ë‹ˆë‹¤.", normal: "ì´ì„±ì ì´ê³  ê¹”ë”í•©ë‹ˆë‹¤. ê·œì¹™ì ì¸ ìƒí™œì´ ë¬´ê¸°ì…ë‹ˆë‹¤.", weak: "ìš°ìœ ë¶€ë‹¨í•´ì§‘ë‹ˆë‹¤. ê¸ˆì† ì¥ì‹ êµ¬ë¥¼ í•˜ì„¸ìš”.", veryWeak: "ê²½ê³„ì‹¬ì´ ë¶€ì¡±í•´ ì†í•´ ë´…ë‹ˆë‹¤. í°ìƒ‰ì„ ì…ìœ¼ì„¸ìš”." },
        "æ°´": { veryStrong: "ìš°ìš¸ê°ì— ë¹ ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë•€ ë‚˜ê²Œ ìš´ë™í•˜ì„¸ìš”.", strong: "ì§€í˜œê°€ ìƒ˜ì†ŸìŠµë‹ˆë‹¤. ì°½ì‘ í™œë™ì— ë§¤ì§„í•˜ì„¸ìš”.", normal: "ìœ ì—°í•˜ê³  ì—¬ìœ ë¡­ìŠµë‹ˆë‹¤. ìˆœë¦¬ëŒ€ë¡œ ì‚¬ì„¸ìš”.", weak: "ìœµí†µì„±ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. ë”°ëœ»í•œ ì°¨ë¥¼ ë§ˆì‹œì„¸ìš”.", veryWeak: "ì—ë„ˆì§€ê°€ ê³ ê°ˆë˜ì—ˆìŠµë‹ˆë‹¤. ì§ ë§›ê³¼ ê²€ì€ìƒ‰ì´ ê¸¸í•©ë‹ˆë‹¤." }
    };

    const nicknamesKo = { 
        "æœ¨": { veryStrong: "ìˆ²ì„ ì‚¼í‚¤ëŠ” ê°œì²™ì", strong: "ìœ„ëŒ€í•œ ê¸°íšì", normal: "ë„˜ì¹˜ëŠ” ì¤‘ì¬ì", weak: "ì–´ë¦° ì‹¹", veryWeak: "ë‚˜ë­‡ê°€ì§€" },
        "ç«": { veryStrong: "íƒœì–‘ì˜ í™”ì‹ ", strong: "ì—´ì • ë¦¬ë”", normal: "ë“±ë¶ˆ ìˆ˜í˜¸ì", weak: "ì‘ì€ ë³„ë¹›", veryWeak: "ì¬ ì†ì˜ ì˜¨ê¸°" },
        "åœŸ": { veryStrong: "ê±°ëŒ€í•œ ë°”ìœ„ì‚°", strong: "ëŒ€ì§€ì˜ ìˆ˜í˜¸ì", normal: "ë“¤íŒ ê´€ë¦¬ì", weak: "ëª¨ë˜ ì–¸ë•", veryWeak: "ë¨¼ì§€ ì†ì˜ ì •ë ¹" },
        "é‡‘": { veryStrong: "ì ˆëŒ€ ì‹¬íŒì", strong: "ì‹ ë…ì˜ ê²€ê°", normal: "ì§€ì„±ì˜ ì¡°ê°ê°€", weak: "í™©ê¸ˆ ì„¸ê³µì‚¬", veryWeak: "ë¬´ëª…ì˜ ì² í•™ì" },
        "æ°´": { veryStrong: "ì‹¬ì—°ì˜ ì†Œìš©ëŒì´", strong: "ì§€í˜œë¡œìš´ í•­í•´ì‚¬", normal: "ê³„ê³¡ì˜ ì‹œëƒ‡ë¬¼", weak: "ê°ì„± ì˜ˆìˆ ê°€", veryWeak: "ê³ ìš”í•œ ì—°ëª»" }
    };

    /* -------------------------------------------------------------------
       2. í•µì‹¬ ê¸°ëŠ¥ ë¡œì§
    ------------------------------------------------------------------- */
    let currentLang = 'ko';
    let session = { name: '', birth: '', seed: 0, scores: [], nameReport: '' };

    function getLevel(sc) { if (sc >= 110) return 'veryStrong'; if (sc >= 80) return 'strong'; if (sc >= 50) return 'normal'; if (sc >= 20) return 'weak'; return 'veryWeak'; }
    async function updateCounter() { try { const res = await fetch('https://api.countapi.xyz/hit/destinylab.github.io/visits'); const data = await res.json(); animateValue("visit-count", 0, data.value, 2000); } catch (e) { document.getElementById('visit-count').innerText = "1,245"; } }
    function animateValue(id, start, end, duration) { const obj = document.getElementById(id); const range = end - start; const startTime = new Date().getTime(); const timer = setInterval(() => { const now = new Date().getTime(); const progress = Math.min((now - startTime) / duration, 1); obj.innerText = Math.floor(progress * range + start).toLocaleString(); if (progress === 1) clearInterval(timer); }, 30); }

    function setLang(lang) {
        currentLang = lang; document.querySelectorAll('.flag').forEach(f => f.classList.remove('active')); document.getElementById(`flag-${lang}`).classList.add('active');
        const t = i18n[lang]; document.getElementById('ui-title').innerText = t.title; document.getElementById('ui-desc').innerText = t.desc; document.getElementById('userName').placeholder = t.nameLabel; document.getElementById('userBirth').placeholder = t.birthLabel; document.getElementById('ui-btn').innerText = t.btn; document.getElementById('ui-reset').innerText = t.reset; document.getElementById('tab1').innerText = t.tab1; document.getElementById('tab2').innerText = t.tab2; document.getElementById('tab3').innerText = t.tab3; document.getElementById('ui-copy').innerText = t.copy;
        const ls = document.getElementById('load-seal'), lt = document.getElementById('load-title'), ld = document.getElementById('load-desc');
        if (lang === 'en') { ls.innerText = "Analyzing"; lt.innerText = "Combining Destiny Energies..."; ld.innerText = "Please wait a moment."; } 
        else { ls.innerText = "ë¶„ì„ì¤‘"; lt.innerText = "ìš´ëª…ì˜ ì—ë„ˆì§€ë¥¼ ì¡°í•© ì¤‘..."; ld.innerText = "ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”."; }
        document.getElementById('seal-home').innerHTML = lang === 'ko' ? "ìš´ëª…ê³µí•™<br>ë¶„ì„ì‹¤" : "Destiny<br>Lab";
        document.getElementById('seal-res').innerText = lang === 'ko' ? "ì •ì‹ë¶„ì„ë³¸" : "OFFICIAL";
        if (session.name) { processData(session.name, session.birth); }
    }

    function getHangulOnset(char) { const c = char.charCodeAt(0) - 44032; if (c < 0 || c > 11171) return null; return ['ã„±','ã„²','ã„´','ã„·','ã„¸','ã„¹','ã…','ã…‚','ã…ƒ','ã……','ã…†','ã…‡','ã…ˆ','ã…‰','ã…Š','ã…‹','ã…Œ','ã…','ã…'][Math.floor(c / 588)]; }

    function startAnalysis() {
        const n = document.getElementById('userName').value.trim(); const b = document.getElementById('userBirth').value.trim();
        if(!n || b.length !== 8) { alert(currentLang === 'ko' ? "ì„±í•¨ê³¼ ìƒë…„ì›”ì¼ 8ìë¦¬ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”." : "Check inputs."); return; }
        const year = parseInt(b.substring(0, 4)); if(year < 1000 || year > 2150) { alert(currentLang === 'ko' ? "ì—°ë„ëŠ” 1000~2150ë…„ ì‚¬ì´ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤." : "Year 1000-2150."); return; }
        document.getElementById('loading-overlay').style.display = 'flex';
        setTimeout(() => { document.getElementById('loading-overlay').style.display = 'none'; processData(n, b); }, 3000);
    }

    function processData(name, birth) {
        const cleanName = name.replace(/<[^>]*>?/gm, ''); const cleanBirth = birth.replace(/[^0-9]/g, '');
        session.name = cleanName; session.birth = cleanBirth;
        session.seed = cleanName.split('').reduce((a,b)=>a+b.charCodeAt(0),0) + parseInt(cleanBirth);
        
        let scores = [40, 40, 40, 40, 40]; 
        for(let i=0; i<cleanName.length; i++) {
            let el = /[a-zA-Z]/.test(cleanName[i]) ? alphabetElements[cleanName[i].toUpperCase()] : hangulElements[getHangulOnset(cleanName[i])];
            if(el) scores[["æœ¨", "ç«", "åœŸ", "é‡‘", "æ°´"].indexOf(el)] += 35;
        }
        const month = parseInt(cleanBirth.substring(4, 6)); scores[[11,12,1,2,3,4,5,6,7,8,9,10].indexOf(month) % 5] += 25;
        session.scores = scores.map((s, i) => s + ((session.seed + i) % 15));

        const maxIdx = session.scores.indexOf(Math.max(...session.scores));
        const strongEl = ["æœ¨", "ç«", "åœŸ", "é‡‘", "æ°´"][maxIdx];
        const lv = getLevel(session.scores[maxIdx]);

        document.getElementById('dynamic-title').innerText = currentLang === 'ko' ? `[${cleanName}]ë‹˜ì˜ ìš´ëª… ë¦¬í¬íŠ¸` : `Report for [${cleanName}]`;
        document.getElementById('dynamic-summary').innerText = currentLang === 'ko' ? nicknamesKo[strongEl][lv] : nicknamesKo[strongEl][lv];

        const keys = Object.keys(nameNumerology);
        const res = nameNumerology[keys[session.seed % keys.length]];
        session.nameReport = currentLang === 'ko' ? `ì„±ëª…í•™ì ìœ¼ë¡œ <b>${res.title}</b>ì´ë©°, ${res.desc}` : `Numerologically: <b>${res.titleEn}</b>. ${res.descEn}`;

        document.getElementById('view-home').classList.add('hidden');
        document.getElementById('view-result').classList.remove('hidden');
        renderChart();
        switchTab('fortune', document.getElementById('tab1'));
    }

    function renderChart() {
        const labels = currentLang === 'ko' ? ["æœ¨", "ç«", "åœŸ", "é‡‘", "æ°´"] : ["Wood", "Fire", "Earth", "Metal", "Water"];
        const cx = 110, cy = 110, r = 75;
        const maxIdx = session.scores.indexOf(Math.max(...session.scores));
        const themeColor = elementColors[["æœ¨", "ç«", "åœŸ", "é‡‘", "æ°´"][maxIdx]];
        let poly = ""; labels.forEach(() => poly += `${cx},${cy} `);
        document.getElementById('radarChart').innerHTML = `<svg viewBox="0 0 220 220" style="overflow:visible;"><circle cx="${cx}" cy="${cy}" r="${r}" fill="none" stroke="#EEE" stroke-width="1"/>${labels.map((l, i) => { const a = (Math.PI * 2 / 5) * i - (Math.PI / 2); const tx = cx + (r + 25) * Math.cos(a), ty = cy + (r + 25) * Math.sin(a); return `<text x="${tx}" y="${ty}" text-anchor="middle" dominant-baseline="middle" fill="#243447" font-size="12" font-weight="700">${l}</text>`; }).join('')}<polygon points="${poly}" fill="${themeColor.fill}" stroke="${themeColor.stroke}" stroke-width="2.5"><animate attributeName="points" dur="1s" fill="freeze" to="${getTargetPoints(labels, cx, cy, r)}" /></polygon></svg>`;
    }

    function getTargetPoints(labels, cx, cy, r) { let p = ""; labels.forEach((_, i) => { const a = (Math.PI * 2 / 5) * i - (Math.PI / 2); const v = (session.scores[i] / 150) * r; p += `${cx + v * Math.cos(a)},${cy + v * Math.sin(a)} `; }); return p.trim(); }

    function switchTab(mode, btn) {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active')); btn.classList.add('active');
        const body = document.getElementById('tab-body'); const s = session.seed; const t = i18n[currentLang];
        if(mode === 'fortune') {
            const elements = ["æœ¨", "ç«", "åœŸ", "é‡‘", "æ°´"]; const maxIdx = session.scores.indexOf(Math.max(...session.scores)); const minIdx = session.scores.indexOf(Math.min(...session.scores));
            const strongEl = elements[maxIdx]; const lackEl = elements[minIdx];
            const sideSource = currentLang === 'ko' ? sideEffects : sideEffectsEn;
            const quoteSource = quoteData["ì¸ìƒ"];
            const masterSideIdx = s % sideEffects.length;
            const finalSideEffect = sideSource[masterSideIdx % sideSource.length];
            const masterQuoteIdx = s % quoteSource.length;
            const finalQuote = quoteSource[masterQuoteIdx].text;

            body.innerHTML = `
                <div class="section-wrap"><span class="section-title">${t.sec1}</span><div class="info-box">${session.nameReport}</div></div>
                <div class="section-wrap"><span class="section-title">${t.sec2}</span><div>â€¢ <b>ì£¼ì²´ ê¸°ìš´:</b> ${strongEl}</div><div>â€¢ <b>${t.advise}:</b> ${elementPrescriptions[strongEl][getLevel(session.scores[maxIdx])]}</div></div>
                <div class="section-wrap"><span class="section-title">${t.sec3}</span><div>â€¢ <b>${t.practice}:</b> ${elementPrescriptions[lackEl][getLevel(session.scores[minIdx])]}</div></div>
                <div class="warning-box"><b>âš ï¸ ${t.sideEffect}</b><br>${finalSideEffect}</div>
                <div style="margin-top:30px; text-align:center; color:#AAA; font-style:italic;">"${finalQuote}"</div>
            `;
        } else if(mode === 'past') {
            const p = pastLifeData[s % pastLifeData.length];
            body.innerHTML = `<span class="section-title">${t.tab2}</span><div class="info-box"><b>ğŸ“œ ${t.pastJob}:</b> [${p.job}]<br>${p.desc}<br><br><b>âœ¨ ${t.pastHomework}:</b><br>${p.homework}</div>`;
        } else {
            const r = reincarnationData[s % reincarnationData.length];
            body.innerHTML = `<span class="section-title">${t.tab3}</span><div class="info-box"><b>ğŸ“ ${t.nextDest}:</b> ${r.place}<br><b>ğŸ§¬ ${t.nextObj}:</b> ${r.object}<br><br><b>âœ… ${t.nextMission}:</b><br>${r.mission}</div>`;
        }
    }

    function copyLink() { const url = `${window.location.origin}${window.location.pathname}?name=${encodeURIComponent(session.name)}&birth=${session.birth}&lang=${currentLang}`; const t = document.createElement("textarea"); document.body.appendChild(t); t.value = `[Destiny Lab] ${session.name}\n${url}`; t.select(); document.execCommand("copy"); document.body.removeChild(t); alert(currentLang === 'ko' ? "ë³µì‚¬ ì™„ë£Œ!" : "Link Copied!"); }

    window.onload = function() { const urlParams = new URLSearchParams(window.location.search); if(urlParams.get('lang')) setLang(urlParams.get('lang')); const n = urlParams.get('name'), b = urlParams.get('birth'); if (n && b && b.length === 8) processData(n, b); updateCounter(); };
</script>
</body>
</html>
