<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìš´ëª… ë§›ì§‘ ğŸ”®</title>
    <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&family=Gowun+Dodum&display=swap" rel="stylesheet">
    <style>
        :root { --pink: #FF9A9E; --lavender: #D8B4FE; --lemon: #FFF7AD; --text: #4A3B52; --gold: #FFD700; }
        body { font-family: 'Gowun Dodum', sans-serif; margin: 0; display: flex; align-items: center; justify-content: center; min-height: 100vh; color: var(--text); background: linear-gradient(135deg, #FF9A9E 0%, #FECFEF 25%, #D8B4FE 60%, #FFF7AD 100%); background-attachment: fixed; overflow-x: hidden; }
        .card { width: 90%; max-width: 400px; background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(15px); padding: 30px 20px; border-radius: 40px; text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,0.1); border: 4px solid white; position: relative; }
        h1 { font-family: 'Gaegu', cursive; font-size: 2.2rem; margin: 0 0 10px 0; background: linear-gradient(to right, #FF007A, #A78BFA); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .btn-box { display: flex; flex-direction: column; gap: 12px; margin-top: 25px; }
        .btn-m { padding: 18px; border: none; border-radius: 20px; font-family: 'Gaegu'; font-size: 1.4rem; font-weight: bold; cursor: pointer; transition: 0.3s; color: white; }
        .btn-m1 { background: #FF9A9E; } .btn-m2 { background: #A78BFA; } .btn-m3 { background: #81ecec; color: #4A3B52; }
        .hidden { display: none; }
        input { width: 100%; padding: 15px; border: 2px solid #EEE; border-radius: 20px; font-size: 1rem; text-align: center; margin-bottom: 15px; outline: none; }
        .btn-action { width: 100%; padding: 18px; border: none; border-radius: 20px; background: #4A3B52; color: white; font-size: 1.2rem; font-family: 'Gaegu'; font-weight: 700; cursor: pointer; }
        #resultPaper { background: white; border-radius: 25px; padding: 20px 15px; border: 2px solid #F3E5F5; margin-top: 20px; text-align: left; }
        .tarot-box { background: #FFF9FA; padding: 15px; border-radius: 20px; border: 1px dashed var(--pink); text-align: center; margin-bottom: 15px; }
        .mini-card { width: 60px; height: 90px; margin: 0 auto 10px; border-radius: 8px; border: 2px solid var(--gold); display: flex; align-items: center; justify-content: center; font-size: 2rem; background: white; }
        .attr-tag { display: inline-block; padding: 4px 12px; background: #4A3B52; color: white; border-radius: 10px; font-size: 0.85rem; margin-bottom: 10px; }
        .msg-text { font-family: 'Gaegu'; font-size: 1.5rem; color: #2D3436; margin-bottom: 15px; line-height: 1.3; }
        .mission-list { background: #F8F4FF; padding: 12px; border-radius: 15px; font-size: 0.9rem; line-height: 1.6; color: #555; }
        .side-text { font-size: 0.75rem; color: #BBB; margin-top: 15px; text-align: center; border-top: 1px solid #F0F0F0; padding-top: 10px; font-style: italic; }
    </style>
</head>
<body>
<div class="card">
    <div id="view-home">
        <h1>ğŸ”® ìš´ëª… ë§›ì§‘ ğŸ­</h1>
        <p style="color:#9D50BB; font-weight:bold; font-size:0.9rem;">ë‹¹ì‹ ì˜ ê¸°ìš´ì„ ë¶„ì„í•´ ë“œë¦½ë‹ˆë‹¤</p>
        <div class="btn-box">
            <button class="btn-m btn-m1" onclick="openMode('fortune')">âœ¨ í˜„ìƒì˜ ê³ ë¯¼ ì²˜ë°©</button>
            <button class="btn-m btn-m2" onclick="openMode('past')">ğŸ“œ ì „ìƒì˜ ìˆ™ì œ í™•ì¸</button>
            <button class="btn-m btn-m3" onclick="openMode('next')">ğŸŒˆ í™˜ìƒ ì˜ˆì•½ ì•Œì•„ë³´ê¸°</button>
        </div>
    </div>
    <div id="view-input" class="hidden">
        <h1 id="title-input">ì œëª©</h1>
        <input type="text" id="userInput" placeholder="ë‚´ìš© ì…ë ¥">
        <button class="btn-action" onclick="run()">ê²°ê³¼ í™•ì¸í•˜ê¸° ğŸ’Œ</button>
        <p style="cursor:pointer; color:#888; font-size:0.8rem; margin-top:15px; text-decoration:underline;" onclick="goHome()">ì²˜ìŒìœ¼ë¡œ</p>
    </div>
    <div id="view-result" class="hidden">
        <div id="resultPaper">
            <div class="tarot-box">
                <div id="res-tarot-card" class="mini-card">ğŸ”®</div>
                <div id="res-tarot-desc" style="font-size:0.8rem; color:#666;">ìš´ëª…ì˜ ì†ì‚­ì„ì„ ì½ëŠ” ì¤‘...</div>
            </div>
            <div id="res-attr" class="attr-tag">ì†ì„± ì •ë³´</div>
            <div id="res-msg" class="msg-text">ë©”ì‹œì§€ ë³¸ë¬¸</div>
            <div id="res-missions" class="mission-list">ë¯¸ì…˜ ì •ë³´</div>
            <div id="res-side" class="side-text">ì£¼ì˜ì‚¬í•­</div>
        </div>
        <button class="btn-action" style="margin-top:20px; background:#FF9A9E;" onclick="shareResult()">ë‚˜ì˜ ìš´ëª… ê³µìœ í•˜ê¸° ğŸ</button>
        <button class="btn-action" style="margin-top:10px; background:#F3E5F5; color:#9D50BB;" onclick="goHome()">ë©”ë‰´ë¡œ ëŒì•„ê°€ê¸°</button>
    </div>
</div>
<script src="quotes.js"></script>
<script>
    let mode = '';
    const ui = {
        home: document.getElementById('view-home'),
        input: document.getElementById('view-input'),
        result: document.getElementById('view-result'),
        title: document.getElementById('title-input'),
        field: document.getElementById('userInput')
    };

    function openMode(m) {
        mode = m;
        ui.home.classList.add('hidden');
        ui.input.classList.remove('hidden');
        ui.result.classList.add('hidden');
        ui.title.innerText = m==='fortune'?"âœ¨ ê³ ë¯¼ ì²˜ë°©ì „":m==='past'?"ğŸ“œ ì „ìƒ ìˆ™ì œ í™•ì¸":"ğŸŒˆ í™˜ìƒ ì˜ˆì•½ì„œ";
        ui.field.placeholder = m==='fortune'?"ê³ ë¯¼ì„ ì ì–´ë³´ì„¸ìš”":"ì´ë¦„ì„ ì ì–´ë³´ì„¸ìš”";
        ui.field.value = "";
    }

    function goHome() {
        ui.home.classList.remove('hidden');
        ui.input.classList.add('hidden');
        ui.result.classList.add('hidden');
    }

    function run() {
        const val = ui.field.value.trim();
        if(!val) { alert("ë‚´ìš©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”! ğŸ­"); return; }
        const seed = val.split('').reduce((a, b) => a + b.charCodeAt(0), 0);
        const card = tarotCards[seed % 22];
        const attrNames = ["ì²­ëŸ‰í•œ í‘¸ë¥¸ ë‚˜ë¬´", "ì •ì—´ì ì¸ íƒœì–‘ì˜ ë¶ˆ", "ë‹¨ë‹¨í•œ ëŒ€ì§€ì˜ í™", "ì˜ˆë¦¬í•œ ì •ë ¨ëœ ê¸ˆì†", "ê¹Šê³  ë§‘ì€ ì‹¬í•´ì˜ ë¬¼"];
        const attrColors = ["#B4F8C8", "#FFB7B2", "#FFDAC1", "#EEE", "#B2CEFE"];

        document.getElementById('res-tarot-card').innerText = tarotIcons[card];
        document.getElementById('res-tarot-card').style.background = attrColors[seed % 5];
        document.getElementById('res-tarot-desc').innerHTML = `<b>${card}</b>: ${tarotInterpretations[card]}`;
        document.getElementById('res-attr').innerText = `ë‚˜ì˜ ì†ì„±: [${attrNames[seed % 5]}]`;

        if(mode === 'fortune') {
            let cat = "ê¸°ë³¸";
            for(let k in keywords) { if(keywords[k].some(w => val.includes(w))) { cat = k; break; } }
            const quotes = quoteData[cat] || quoteData["ê¸°ë³¸"];
            document.getElementById('res-msg').innerText = `"${quotes[seed % quotes.length].text}"`;
            document.getElementById('res-missions').innerHTML = `<b>ì˜í˜¼ì˜ ë°¸ëŸ°ìŠ¤ ë¯¸ì…˜:</b><br>1.ğŸ§˜ë§ˆìŒ: ë‚´ ì†ì„±ì˜ ê°•ì ì„ ë¯¿ê³  ì°¨ë¶„í•´ì§€ê¸°<br>2.ğŸƒí–‰ë™: ${recommendations[seed % recommendations.length]}<br>3.ğŸ€ì •í™”: ì£¼ë³€ì„ í™˜ê¸°í•˜ê³  ê°€ë²¼ìš´ ìŠ¤íŠ¸ë ˆì¹­ í•˜ê¸°`;
        } else if(mode === 'past') {
            const p = pastLifeData[seed % pastLifeData.length];
            document.getElementById('res-msg').innerText = `ì „ìƒì˜ ê¸°ë¡: [${p.job}]`;
            document.getElementById('res-missions').innerHTML = `<b>ë‚¨ê²¨ì§„ ì—ë„ˆì§€ ê¸°ë¡:</b><br>${p.desc}<br>â†’ ì´ë²ˆ ìƒì˜ ë°ì´í„° ê°’(ìˆ™ì œ): <b>${p.homework}</b>`;
        } else {
            const n = reincarnationData[seed % reincarnationData.length];
            document.getElementById('res-msg').innerText = `ì°¨ê¸° í–‰ì„ ì§€: [${n.place}]`;
            document.getElementById('res-missions').innerHTML = `<b>ì˜ˆì•½ ì •ë³´:</b><br>- í™˜ìƒ ì˜ˆì •: ${n.object}<br>- í™•ì • ì¡°ê±´: ${n.mission}`;
        }
        document.getElementById('res-side').innerText = `âš ï¸ ìœ ì˜ì‚¬í•­: ${sideEffects[seed % sideEffects.length]}`;
        ui.input.classList.add('hidden');
        ui.result.classList.remove('hidden');
    }

    // ìˆ˜ì • í¬ì¸íŠ¸: ê³µìœ í•˜ê¸° í•¨ìˆ˜ ì¶”ê°€
    function shareResult() {
        const msg = document.getElementById('res-msg').innerText;
        const attr = document.getElementById('res-attr').innerText;
        const url = window.location.href;
        let modeName = mode === 'fortune' ? "í˜„ìƒ ê³ ë¯¼ ì²˜ë°©" : mode === 'past' ? "ì „ìƒ ìˆ™ì œ í™•ì¸" : "í™˜ìƒ ì˜ˆì•½ì„œ";
        const shareText = `[ìš´ëª… ë§›ì§‘ - ${modeName}]\n${attr}\nê²°ê³¼: ${msg}\n\në„ˆì˜ ìš´ëª…ë„ í™•ì¸í•´ë´! ğŸ”®\n${url}`;

        if (navigator.share) {
            navigator.share({ title: 'ìš´ëª… ë§›ì§‘', text: shareText, url: url });
        } else {
            const t = document.createElement("textarea");
            document.body.appendChild(t);
            t.value = shareText;
            t.select();
            document.execCommand("copy");
            document.body.removeChild(t);
            alert("ìš´ëª… ë°ì´í„°ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ì¹œêµ¬ì—ê²Œ ì „ë‹¬í•´ë³´ì„¸ìš”. ğŸ");
        }
    }
</script>
</body>
</html>
